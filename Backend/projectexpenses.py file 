import sqlite3

connection = sqlite3.connect('projectexpenses.db')
cursor = connection.cursor()

sqlcategory = '''CREATE TABLE CATEGORY(
   id int(11) NOT NULL,
   name varchar(50) NOT NULL,
   PRIMARY KEY (`id`)
)'''
cursor.execute(sqlcategory)
print("Category Table created successfully...")

sqlexpense = '''CREATE TABLE EXPENSE(
    id int(11) NOT NULL ,
    project_id int(11) NOT NULL,
    category_id int(11) NOT NULL,
    name varchar(50) NOT NULL,
    description varchar(255) NOT NULL,
    amount float NOT NULL,
    created_at datetime DEFAULT current_timestamp(),
    created_by varchar(50) DEFAULT NULL,
    updated_at datetime DEFAULT current_timestamp() ON UPDATE current_timestamp(),
    updated_by varchar(50) DEFAULT NULL,
    PRIMARY KEY (`id`)
)'''
cursor.execute(sqlexpense)
print("Expense Table created successfully...")

sqlproject = '''CREATE TABLE PROJECT(
    id int(11) NOT NULL ,
    user_id int(11) NOT NULL,
    name varchar(50) NOT NULL,
    description varchar(50) NOT NULL,
    budget float NOT NULL DEFAULT 1000000,
    PRIMARY KEY (`id`),
    KEY `FK_project_user` (`user_id`)
)'''
cursor.execute(sqlproject)
print("Project Table created successfully...")

sqluser = '''CREATE TABLE USER(
    id int(11) NOT NULL ,
    username varchar(50) NOT NULL,
    password varchar(50) NOT NULL,
    name varchar(50) NOT NULL,
    appointment varchar(50) NOT NULL DEFAULT 'Project Manager',
    PRIMARY KEY (`id`)
)'''
cursor.execute(sqluser)
print("User Table created successfully...")

connection.commit() #commit changes in database

cursor.execute("INSERT INTO 'category' ('id', 'name') 
    VALUES 
    (1, 'Production'),
    (2, 'Operation'),
    (3, 'Financial'),
    (4, 'Vendor'),
    (5, 'Manpower'),
    (6, 'Software'),
    (7, 'Hardware')
    )

cursor.execute ('INSERT INTO `expense` (`id`, `project_id`, `category_id`, `name`, `description`, `amount`, `created_at`, `created_by`, `updated_at`, `updated_by`) VALUES
	(1, 2, 2, 'Server Maintenance', 'Server maintenance and upgrading work to incorporate BC plans', 30000, '2021-11-04 16:00:00', 'Jacky', '2021-11-06 16:00:00', 'Jacky'),
	(2, 3, 4, 'Consultant', 'Consultancy services for integration work', 10000, '2021-11-06 16:00:00', 'Helen', '2021-11-07 16:00:00', 'Helen')
)

cursor.execute('INSERT INTO `project` (`id`, `user_id`, `name`, `description`, `budget`) VALUES 
	 (1, 4, 'RTF', 'Realtime Face Recognition', 12000),
	 (2, 1, 'SWT', 'Smart Watch Tracker', 80000),
	 (3, 2, 'ULS', 'Upgrade Legacy System', 11000)
)
cursor.execute('INSERT INTO `user` (`id`, `username`, `password`, `name`, `appointment`) VALUES
	(1, 'user101', '123456', 'Jacky', 'Project Lead'),
	(2, 'user102', '123456', 'Tommy', 'Project Manager'),
	(3, 'user103', '123456', 'Tom', 'Project Manager'),
	(4, 'user104', '123456', 'Helen', 'Project Manager'),
	(5, 'user105', '123456', 'Mark', 'Senior Project Manager')
)

connection.commit() #commit changes in database
connection.close() #closing connection